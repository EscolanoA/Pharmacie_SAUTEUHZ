<%- include('header') %>
    <div> Bienvenue sur la page des pathologies </div>
    <a id="attention"></a>
    <% for(let i=0; i < pathologies.length; i++) {%>
        <li>
            <button
                onClick="location.href='http://localhost:3000/pathologies/modifier/<%=pathologies[i].pathologie_id%>';">Modifier</button>

            <button onclick="popupAttentionOn<%=i+1%>()">Supprimer</button>
            <script>
                function popupAttentionOn<%=i+1 %> () {
                    document.getElementById("attention").innerHTML = `Ceci Suprimera les ordonnances qui contiennent cette maladie <button onClick="location.href='http://localhost:3000/pathologies/supprimer/<%=pathologies[i].pathologie_id%>';">oui</button>   ||  <button onClick="popupAttentionOff()">non</button>?`
                }


            </script>




            <strong>
                nÂ° Pathologie : <%= pathologies[i].pathologie_id %>
                Nom : <%= pathologies[i].pathologie_nom.toUpperCase() %>
            </strong>
        </li>
        <% }%>



            <div> Ajout d'une pathologie </div>

            <form action="/pathologies/ajouter" id="form" method="POST" enctype="application/x-www-formurlencoded">
                <div>


                    <label for="nom">Nom : </label>
                    <input type="text" name="nom" id="inputNom" required>

                    <button id="btnAjouter" type="submit">Ajouter</button>
                </div>
            </form>

            <script>
                function popupAttentionOff() {
                    document.getElementById("attention").innerHTML = ""
                }
                
                const onlyInputs = document.querySelectorAll('#form input');
                const submit = document.querySelector('button[type="submit"]')

                onlyInputs.forEach(input => {
                    input.addEventListener('focusout', function() {
                        let value = input.value.trim();
                        input.value = value
                    })
                });

            </script>
